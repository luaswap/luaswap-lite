(this.webpackJsonp=this.webpackJsonp||[]).push([[16],{1075:function(e,t,r){"use strict";r.r(t);var a=r(9),n=r.n(a),o=r(0),l=r.n(o),c=r(5),i=r(24),u=r(59);t.default=function(e){Object(o.useContext)(u.GlobalContext).darkMode;return l.a.createElement(c.default,n()({},e,{style:[{width:i.IS_DESKTOP?1200:"100%",marginLeft:"auto",marginRight:"auto",padding:i.IS_DESKTOP?i.Spacing.normal:10},e.style]}))}},1223:function(e,t,r){"use strict";r.r(t);var a=r(18),n=r.n(a),o=r(10),l=r.n(o),c=r(4),i=r.n(c),u=r(0),m=r.n(u),s=r(2),d=r(5),f=r(98),b=r(1216),p=r(28),O=r(139),E=r.n(O),y=r(1034),k=r(1042),T=r(373);var C=function(){return u.createElement(d.default,{style:{position:"absolute",width:"100%",aspectRatio:1,bottom:-35,left:0,right:0,marginLeft:-2}},u.createElement("svg",{width:"100.6%",height:"76",viewBox:"0 0 508 76",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u.createElement("mask",{id:"path-1-outside-1",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"508",height:"76",fill:"black"},u.createElement("rect",{fill:"white",width:"508",height:"76"}),u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 2H506V50C506 61.8932 497.349 71.7658 485.997 73.6687C485.82 64.9851 478.726 58 470 58C461.163 58 454 65.1634 454 74H438C438 65.1634 430.837 58 422 58C413.163 58 406 65.1634 406 74H390C390 65.1634 382.837 58 374 58C365.163 58 358 65.1634 358 74H342C342 65.1634 334.837 58 326 58C317.163 58 310 65.1634 310 74H294C294 65.1634 286.837 58 278 58C269.163 58 262 65.1634 262 74H246C246 65.1634 238.837 58 230 58C221.163 58 214 65.1634 214 74H198C198 65.1634 190.837 58 182 58C173.163 58 166 65.1634 166 74H150C150 65.1634 142.837 58 134 58C125.163 58 118 65.1634 118 74H102C102 65.1634 94.8366 58 86 58C77.1634 58 70 65.1634 70 74H54C54 65.1634 46.8366 58 38 58C29.2741 58 22.1797 64.9851 22.0034 73.6687C10.6509 71.7658 2 61.8932 2 50V2Z"})),u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 2H506V50C506 61.8932 497.349 71.7658 485.997 73.6687C485.82 64.9851 478.726 58 470 58C461.163 58 454 65.1634 454 74H438C438 65.1634 430.837 58 422 58C413.163 58 406 65.1634 406 74H390C390 65.1634 382.837 58 374 58C365.163 58 358 65.1634 358 74H342C342 65.1634 334.837 58 326 58C317.163 58 310 65.1634 310 74H294C294 65.1634 286.837 58 278 58C269.163 58 262 65.1634 262 74H246C246 65.1634 238.837 58 230 58C221.163 58 214 65.1634 214 74H198C198 65.1634 190.837 58 182 58C173.163 58 166 65.1634 166 74H150C150 65.1634 142.837 58 134 58C125.163 58 118 65.1634 118 74H102C102 65.1634 94.8366 58 86 58C77.1634 58 70 65.1634 70 74H54C54 65.1634 46.8366 58 38 58C29.2741 58 22.1797 64.9851 22.0034 73.6687C10.6509 71.7658 2 61.8932 2 50V2Z",fill:"#353535"}),u.createElement("path",{d:"M506 2H507.5V0.5H506V2ZM2 2V0.5H0.5V2H2ZM485.997 73.6687L484.497 73.6992L484.532 75.4351L486.245 75.1481L485.997 73.6687ZM454 74V75.5H455.5V74H454ZM438 74H436.5V75.5H438V74ZM406 74V75.5H407.5V74H406ZM390 74H388.5V75.5H390V74ZM358 74V75.5H359.5V74H358ZM342 74H340.5V75.5H342V74ZM310 74V75.5H311.5V74H310ZM294 74H292.5V75.5H294V74ZM262 74V75.5H263.5V74H262ZM246 74H244.5V75.5H246V74ZM214 74V75.5H215.5V74H214ZM198 74H196.5V75.5H198V74ZM166 74V75.5H167.5V74H166ZM150 74H148.5V75.5H150V74ZM118 74V75.5H119.5V74H118ZM102 74H100.5V75.5H102V74ZM70 74V75.5H71.5V74H70ZM54 74H52.5V75.5H54V74ZM22.0034 73.6687L21.7554 75.1481L23.4678 75.4351L23.5031 73.6992L22.0034 73.6687ZM506 0.5H2V3.5H506V0.5ZM507.5 50V2H504.5V50H507.5ZM486.245 75.1481C498.308 73.126 507.5 62.638 507.5 50H504.5C504.5 61.1483 496.391 70.4056 485.749 72.1894L486.245 75.1481ZM470 59.5C477.908 59.5 484.337 65.8303 484.497 73.6992L487.496 73.6383C487.303 64.1399 479.544 56.5 470 56.5V59.5ZM455.5 74C455.5 65.9919 461.992 59.5 470 59.5V56.5C460.335 56.5 452.5 64.335 452.5 74H455.5ZM438 75.5H454V72.5H438V75.5ZM422 59.5C430.008 59.5 436.5 65.9919 436.5 74H439.5C439.5 64.335 431.665 56.5 422 56.5V59.5ZM407.5 74C407.5 65.9919 413.992 59.5 422 59.5V56.5C412.335 56.5 404.5 64.335 404.5 74H407.5ZM390 75.5H406V72.5H390V75.5ZM374 59.5C382.008 59.5 388.5 65.9919 388.5 74H391.5C391.5 64.335 383.665 56.5 374 56.5V59.5ZM359.5 74C359.5 65.9919 365.992 59.5 374 59.5V56.5C364.335 56.5 356.5 64.335 356.5 74H359.5ZM342 75.5H358V72.5H342V75.5ZM326 59.5C334.008 59.5 340.5 65.9919 340.5 74H343.5C343.5 64.335 335.665 56.5 326 56.5V59.5ZM311.5 74C311.5 65.9919 317.992 59.5 326 59.5V56.5C316.335 56.5 308.5 64.335 308.5 74H311.5ZM294 75.5H310V72.5H294V75.5ZM278 59.5C286.008 59.5 292.5 65.9919 292.5 74H295.5C295.5 64.335 287.665 56.5 278 56.5V59.5ZM263.5 74C263.5 65.9919 269.992 59.5 278 59.5V56.5C268.335 56.5 260.5 64.335 260.5 74H263.5ZM246 75.5H262V72.5H246V75.5ZM230 59.5C238.008 59.5 244.5 65.9919 244.5 74H247.5C247.5 64.335 239.665 56.5 230 56.5V59.5ZM215.5 74C215.5 65.9919 221.992 59.5 230 59.5V56.5C220.335 56.5 212.5 64.335 212.5 74H215.5ZM198 75.5H214V72.5H198V75.5ZM182 59.5C190.008 59.5 196.5 65.9919 196.5 74H199.5C199.5 64.335 191.665 56.5 182 56.5V59.5ZM167.5 74C167.5 65.9919 173.992 59.5 182 59.5V56.5C172.335 56.5 164.5 64.335 164.5 74H167.5ZM150 75.5H166V72.5H150V75.5ZM134 59.5C142.008 59.5 148.5 65.9919 148.5 74H151.5C151.5 64.335 143.665 56.5 134 56.5V59.5ZM119.5 74C119.5 65.9919 125.992 59.5 134 59.5V56.5C124.335 56.5 116.5 64.335 116.5 74H119.5ZM102 75.5H118V72.5H102V75.5ZM86 59.5C94.0081 59.5 100.5 65.9919 100.5 74H103.5C103.5 64.335 95.665 56.5 86 56.5V59.5ZM71.5 74C71.5 65.9919 77.9919 59.5 86 59.5V56.5C76.335 56.5 68.5 64.335 68.5 74H71.5ZM54 75.5H70V72.5H54V75.5ZM38 59.5C46.0081 59.5 52.5 65.9919 52.5 74H55.5C55.5 64.335 47.665 56.5 38 56.5V59.5ZM23.5031 73.6992C23.6629 65.8303 30.0924 59.5 38 59.5V56.5C28.4559 56.5 20.6966 64.1399 20.5037 73.6383L23.5031 73.6992ZM0.5 50C0.5 62.638 9.69221 73.126 21.7554 75.1481L22.2513 72.1894C11.6095 70.4056 3.5 61.1483 3.5 50H0.5ZM0.5 2V50H3.5V2H0.5Z",fill:"#606060",mask:"url(#path-1-outside-1)"})))},j=r(298),S=r(1031),g=r(371),H=r(1075),v=r(1032),V=r(1037),h=r(1029),x=r(1033),w=r(1036),M=r(1040),Z=r(1046),P=r(1068),A=r(74),I=r(1041),R=r(1214),D=r(1078),F=r(374),L=r(67),B=r(24),N=r(158),_=r(62),K=r(42),z=r(1069),W=r(1030),U=r(21),J=r(1067),G=r(378),q=r(382),Q=r(377),X=r(1071);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ee=function(){var e=Object(X.default)(),t=Object(u.useContext)(_.EthersContext),r=t.chainId,a=(t.provider,t.signer),o=t.updateTokens,l=Object(G.default)().getTrade,c=Object(Q.default)(),m=c.swap,s=c.calculateSwapFee,d=Object(q.default)(),f=d.calculateLimitOrderFee,b=d.calculateLimitOrderReturn,p=Object(q.default)().createOrder,O=Object(u.useState)(!0),y=n()(O,2),k=y[0],T=y[1],C=Object(u.useState)(),j=n()(C,2),S=j[0],g=j[1],H=Object(u.useState)(),v=n()(H,2),V=v[0],h=v[1],x=Object(u.useState)(!1),w=n()(x,2),M=w[0],Z=w[1],P=Object(u.useState)(""),A=n()(P,2),I=A[0],R=A[1],D=Object(u.useState)(""),F=n()(D,2),L=F[0],B=F[1],K=Object(u.useState)(""),W=n()(K,2),Y=W[0],ee=W[1],te=Object(u.useState)(""),re=n()(te,2),ae=re[0],ne=re[1],oe=Object(u.useState)(""),le=n()(oe,2),ce=le[0],ie=le[1],ue=Object(u.useState)(!1),me=n()(ue,2),se=me[0],de=me[1],fe=Object(u.useState)(!1),be=n()(fe,2),pe=be[0],Oe=be[1],Ee=Object(u.useState)(),ye=n()(Ee,2),ke=ye[0],Te=ye[1];Object(u.useEffect)((function(){S||e.setFromSymbol(""),B("")}),[S]),Object(z.default)((function(){Object(U.isEmptyValue)(e.fromAmount)&&(B(""),h(void 0))}),300,[e.fromAmount]),Object(J.default)((function(t){var r;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t||T(!0),!(e.fromToken&&e.toToken&&e.fromAmount)){a.next=19;break}if((r=Object(U.parseBalance)(e.fromAmount,e.fromToken.decimals)).isZero()){a.next=19;break}return Z(!1),a.prev=5,a.t0=h,a.next=9,i.a.awrap(l(e.fromToken,e.toToken,r,_.TOMOCHAIN_MAINET_PROVIDER));case 9:a.t1=a.sent,(0,a.t0)(a.t1),a.next=16;break;case 13:a.prev=13,a.t2=a.catch(5),Z(!0);case 16:return a.prev=16,T(!1),a.finish(16);case 19:case"end":return a.stop()}}),null,null,[[5,13,16,19]],Promise)}),(function(){return"getTrade("+e.fromSymbol+","+e.toSymbol+","+e.fromAmount+")"}),[r,e.fromToken,e.toToken,e.fromAmount]),E()((function(){if(V&&!Object(U.isEmptyValue)(e.fromAmount)){var t=Object(U.parseBalance)(e.fromAmount,e.fromToken.decimals);R(Object(U.formatBalance)(s(t),e.fromToken.decimals,8)),"limit"===S&&(ee(Object(U.formatBalance)(f(t),e.fromToken.decimals,8)),ne(Object(U.formatBalance)(s(t.sub(f(t))),e.fromToken.decimals,8)))}}),[S,V,e.fromAmount]),E()((function(){e.fromToken&&e.toToken&&!Object(U.isEmptyValue)(e.fromAmount)&&!Object(U.isEmptyValue)(L)&&ie(Object(U.formatBalance)(b(e.fromToken,e.toToken,Object(U.parseBalance)(e.fromAmount,e.fromToken.decimals),L),e.toToken.decimals))}),[e.fromToken,e.toToken,e.fromAmount,L]),E()((function(){var t,r;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.fromToken){a.next=12;break}return t=Object(U.getContract)("TRC21",e.fromToken.address,_.TOMOCHAIN_MAINET_PROVIDER),a.prev=2,a.next=5,i.a.awrap(t.minFee());case 5:r=a.sent,Te(r),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),Te(void 0);case 12:case"end":return a.stop()}}),null,null,[[2,9]],Promise)}),[e.fromToken]);var Ce=Object(u.useCallback)((function(){var t;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e.fromToken&&e.toToken&&e.fromAmount&&a&&V)){r.next=16;break}return de(!0),r.prev=2,r.next=5,i.a.awrap(m(V,a));case 5:if(!(t=r.sent)){r.next=13;break}return r.next=9,i.a.awrap(t.tx.wait());case 9:return r.next=11,i.a.awrap(o());case 11:h(void 0),g(void 0);case 13:return r.prev=13,de(!1),r.finish(13);case 16:case"end":return r.stop()}}),null,null,[[2,,13,16]],Promise)}),[e.fromToken,e.toToken,e.fromAmount,a,V]),je=Object(u.useCallback)((function(){var t,r;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.fromToken&&e.toToken&&e.fromAmount&&!Object(U.isEmptyValue)(L)&&a)){n.next=14;break}return Oe(!0),n.prev=2,t=Object(U.parseBalance)(e.fromAmount,e.fromToken.decimals),n.next=6,i.a.awrap(p(e.fromToken,e.toToken,t,N.default.parse(L).apply(t).mul(Object(U.pow10)(e.toToken.decimals)).div(Object(U.pow10)(e.fromToken.decimals)),a));case 6:return r=n.sent,n.next=9,i.a.awrap(r.wait());case 9:h(void 0),g(void 0);case 11:return n.prev=11,Oe(!1),n.finish(11);case 14:case"end":return n.stop()}}),null,null,[[2,,11,14]],Promise)}),[r,e.fromToken,e.toToken,e.fromAmount,a,L]);return $($({},e),{},{loading:k||e.loading,orderType:S,setOrderType:g,trade:V,unsupported:M,swapFee:I,limitOrderPrice:L,setLimitOrderPrice:B,limitOrderFee:Y,limitOrderSwapFee:ae,limitOrderReturn:ce,onSwap:Ce,swapping:se,limitOrderUnsupported:"limit"===S&&(Object(U.isNativeToken)(e.fromToken)||Object(U.isNativeToken)(e.toToken)),onCreateOrder:je,creatingOrder:pe,trc21Fee:ke})},te=r(70),re=r(372),ae=r(123),ne=function(e){return m.a.createElement(d.default,{style:{height:1,width:"100%",marginTop:e.small?B.Spacing.tiny:B.Spacing.small}})},oe=r(1045);function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ie=s.default.create({container:{flex:1,marginLeft:10,marginRight:10,alignItems:"stretch",justifyContent:"center"},backgroundImage:{width:"100%"},link:{color:"#aaa",textAlign:"left"},hover:{textDecorationLine:"underline"}}),ue=function(){var e=Object(u.useContext)(_.EthersContext).chainId,t=Object(K.default)(),r=(t.border,t.backgroundLight),a=t.backgroundLightBox;if(88!==e)return m.a.createElement(S.default,null);var n=ee();return m.a.createElement(d.default,null,m.a.createElement(ae.default,{style:{flexDirection:B.IS_DESKTOP?"row":"column"}},m.a.createElement(d.default,{style:{flex:B.IS_DESKTOP?4:1,padding:B.IS_DESKTOP?30:10,borderRadius:20,backgroundColor:r,zIndex:1,minHeight:"auto"}},m.a.createElement(me,{state:n}),m.a.createElement(d.default,{style:{backgroundColor:B.IS_DESKTOP?a:"transparent",padding:B.IS_DESKTOP?20:0,borderRadius:15,marginHorizontal:B.IS_DESKTOP?10:0}},m.a.createElement(se,{state:n}),m.a.createElement(ne,null),m.a.createElement(de,{state:n}),m.a.createElement(ne,null),m.a.createElement(fe,{state:n}),"limit"===n.orderType&&m.a.createElement(d.default,{style:{marginTop:B.Spacing.small}},m.a.createElement(be,{state:n})),!n.loading&&!n.trade&&m.a.createElement(Oe,{state:n}))),m.a.createElement(b.default,{offsetTop:0,offsetBottom:20,style:{maxHeight:350,flex:B.IS_DESKTOP?3:1,marginLeft:B.IS_DESKTOP?20:0,marginTop:B.IS_DESKTOP?0:30}},m.a.createElement(d.default,null,m.a.createElement(Ee,{state:n})))))},me=function(e){var t=e.state,r=Object(te.default)(),a=[{key:"market",title:r("market-order"),description:r("market-order-desc")},{key:"limit",title:r("limit-order"),description:r("limit-order-desc")}];return m.a.createElement(m.a.Fragment,null,m.a.createElement(P.default,{title:r("order-type"),options:a,option:a.find((function(e){return e.key===t.orderType})),setOption:function(e){return t.setOrderType(null==e?void 0:e.key)}}))},se=function(e){var t=e.state,r=Object(te.default)(),a=Object(u.useContext)(_.EthersContext),n=a.tokens,o=a.customTokens;if(!t.orderType)return m.a.createElement(h.default,{text:r("token-to-sell"),disabled:!0});var l=n?n.find((function(e){return Object(U.isNativeToken)(e)})):null;return m.a.createElement(d.default,{style:{zIndex:1}},m.a.createElement(R.default,{title:r("token-to-sell"),symbol:t.fromSymbol,onChangeSymbol:t.setFromSymbol,hidden:function(e){return!o.find((function(t){return t.address===e.address}))&&e.balance.isZero()||"limit"===t.orderType&&Object(U.isNativeToken)(e)}}),"limit"===t.orderType&&!t.fromSymbol&&l&&!l.balance.isZero()&&m.a.createElement(pe,null))},de=function(e){var t=e.state,r=Object(te.default)();if(!t.orderType||!t.fromSymbol)return m.a.createElement(h.default,{text:r("token-to-buy"),disabled:!0});var a="limit"===t.orderType;return m.a.createElement(d.default,{style:{zIndex:10}},m.a.createElement(R.default,{title:r("token-to-buy"),symbol:t.toSymbol,onChangeSymbol:function(e){t.setToSymbol(a&&"TOMO"===e?"WTOMO":e)},hidden:function(e){return e.symbol===t.fromSymbol||a&&Object(U.isNativeToken)(e)}}),"limit"===t.orderType&&!t.toSymbol&&m.a.createElement(pe,null))},fe=function(e){var t=e.state,r=Object(te.default)();return t.fromSymbol&&t.toSymbol?m.a.createElement(d.default,null,m.a.createElement(h.default,{text:t.fromSymbol+" "+r("amount")}),m.a.createElement(I.default,{token:t.fromToken,amount:t.fromAmount,onAmountChanged:t.setFromAmount,autoFocus:B.IS_DESKTOP,trc21Fee:t.trc21Fee})):m.a.createElement(h.default,{text:r("amount"),disabled:!0})},be=function(e){var t=e.state,r=Object(te.default)();if(!t.fromSymbol||!t.toSymbol)return m.a.createElement(h.default,{text:r("minimum-price"),disabled:!0});var a=t.toToken&&t.trade?Object(U.parseBalance)(t.trade.executionPrice.toFixed(t.toToken.decimals),t.toToken.decimals):p.ethers.constants.Zero;return m.a.createElement(I.default,{title:r("minimum-price")+" ("+t.fromSymbol+"/"+t.toSymbol+")",token:ce(ce({},t.toToken),{},{balance:a}),amount:t.limitOrderPrice,onAmountChanged:t.setLimitOrderPrice,maxButtonText:r("-market-")})},pe=function(){Object(K.default)().textLight;var e=Object(te.default)(),t=Object(W.default)("https://app.luaswap.org/#/swap?outputCurrency=0xB1f66997A5760428D3a87D68b90BfE0aE64121cC","","_blank");return m.a.createElement(oe.Hoverable,{style:{position:"absolute",padding:5,borderRadius:5,right:10,top:-10,maxWidth:B.IS_DESKTOP?270:168,backgroundColor:"#353535"}},(function(r){return m.a.createElement(j.default,{title:e("eth-not-supported-for-limit-orders"),type:"clear",size:"small",titleStyle:[ie.link,r&&ie.hover],onPress:t,containerStyle:{overflow:"visible"},buttonStyle:{paddingHorizontal:0,paddingVertical:0}})}))},Oe=function(e){var t=e.state,r=Object(te.default)();return m.a.createElement(Z.default,{text:r("pair-not-created",{fromSymbol:t.fromSymbol,toSymbol:t.toSymbol}),color:"#FABC46",style:{marginTop:B.Spacing.normal}})},Ee=function(e){var t=e.state;Object(te.default)();if(Object(U.isNativeAndWrappedNativePair)(t.fromToken,t.toToken))return m.a.createElement(ye,{state:t});var r=""===t.fromSymbol||""===t.toSymbol||Object(U.isEmptyValue)(t.fromAmount)||"limit"===t.orderType&&Object(U.isNativeToken)(t.fromToken)||!t.loading&&!t.trade;return m.a.createElement(x.default,{style:{minHeight:"auto"}},m.a.createElement(C,null),m.a.createElement(f.Divider,{style:{backgroundColor:"#353535",height:7,position:"absolute",width:"100%",left:0,bottom:32}}),"limit"===t.orderType?m.a.createElement(m.a.Fragment,null,m.a.createElement(ge,{state:t})):m.a.createElement(ke,{state:t,disabled:r}))},ye=function(e){var t=e.state,r=Object(U.isEmptyValue)(t.fromAmount);return m.a.createElement(x.default,null,m.a.createElement(A.default,{style:{fontSize:28,marginBottom:B.Spacing.normal},disabled:r},r?"---":t.fromAmount+" "+t.toSymbol),m.a.createElement(Te,{state:t}))},ke=function(e){var t,r,a,n,o,l,c=e.state,i=e.disabled,u=Object(te.default)(),s=null==(t=c.trade)||null==(r=t.outputAmount)?void 0:r.toFixed(),f=null==(a=c.trade)||null==(n=a.executionPrice)?void 0:n.toFixed(),b=null==(o=c.trade)||null==(l=o.priceImpact)?void 0:l.toFixed(2);return m.a.createElement(d.default,null,m.a.createElement(y.default,{amount:s,suffix:c.toSymbol,disabled:i}),m.a.createElement(M.default,{label:u("price"),text:f,suffix:c.toSymbol+"  = 1 "+c.fromSymbol,disabled:i}),m.a.createElement(M.default,{label:u("price-impact"),text:b,suffix:"%",disabled:i}),m.a.createElement(M.default,{label:u("fee-amount"),text:c.swapFee,suffix:c.fromSymbol,disabled:i}),m.a.createElement(Te,{state:c}))},Te=function(e){var t=e.state,r=Object(u.useState)({}),a=n()(r,2),o=a[0],l=a[1];E()((function(){return l({})}),[t.fromSymbol,t.toSymbol,t.fromAmount]);var c=!Object(U.isNativeToken)(t.fromToken)&&!t.fromTokenAllowed;return m.a.createElement(d.default,{style:{marginTop:B.Spacing.normal}},t.fromToken&&t.toToken&&!Object(U.isEmptyValue)(t.fromAmount)&&(t.loading||t.trade)?Object(U.parseBalance)(t.fromAmount,t.fromToken.decimals).gt(t.fromToken.balance)?m.a.createElement(w.default,{symbol:t.fromSymbol}):Object(U.isWrappedNativeToken)(t.fromToken)&&Object(U.isNativeToken)(t.toToken)?m.a.createElement(Se,{state:t,onError:l}):Object(U.isNativeToken)(t.fromToken)&&Object(U.isWrappedNativeToken)(t.toToken)?m.a.createElement(je,{state:t,onError:l}):t.unsupported?m.a.createElement(D.default,{state:t}):t.loading||!t.trade?m.a.createElement(V.default,null):m.a.createElement(m.a.Fragment,null,m.a.createElement(k.default,{token:t.fromToken,spender:L.ROUTER,onSuccess:function(){return t.setFromTokenAllowed(!0)},onError:l,hidden:!c}),m.a.createElement(Ce,{state:t,onError:l,disabled:c})):m.a.createElement(Ce,{state:t,onError:l,disabled:!0}),o.message&&4001!==o.code&&m.a.createElement(v.default,{error:o}))},Ce=function(e){var t=e.state,r=e.onError,a=e.disabled,n=Object(te.default)(),o=Object(u.useCallback)((function(){r({}),t.onSwap().catch(r)}),[t.onSwap,r]);return m.a.createElement(j.default,{title:n("swap-",{symbol:t.fromSymbol&&t.toSymbol?" "+t.fromSymbol+"-"+t.toSymbol:""}),style:{borderRadius:15},disabled:a,loading:t.swapping,onPress:o})},je=function(e){var t=e.state,r=e.onError,a=Object(te.default)(),n=Object(u.useCallback)((function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:r({}),t.onWrap().catch(r);case 2:case"end":return e.stop()}}),null,null,null,Promise)}),[t.onSwap,r]);return m.a.createElement(j.default,{title:a("wrap"),loading:t.wrapping,onPress:n,style:{borderRadius:15}})},Se=function(e){var t=e.state,r=e.onError,a=Object(te.default)(),n=Object(u.useCallback)((function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:r({}),t.onUnwrap().catch(r);case 2:case"end":return e.stop()}}),null,null,null,Promise)}),[]);return m.a.createElement(j.default,{title:a("unwrap"),loading:t.unwrapping,onPress:n})},ge=function(e){var t,r,a,n=e.state,o=Object(te.default)(),l=!(null!=(t=n.trade)&&t.executionPrice);return m.a.createElement(d.default,null,m.a.createElement(A.default,{disabled:Object(U.isEmptyValue)(n.limitOrderReturn),fontWeight:"bold",style:{fontSize:24,marginBottom:B.Spacing.normal}},Object(U.isEmptyValue)(n.limitOrderReturn)?"---":n.limitOrderReturn+" "+n.toSymbol),m.a.createElement(M.default,{label:o("market-price"),text:(null==(r=n.trade)||null==(a=r.executionPrice)?void 0:a.toFixed(8))||void 0,suffix:n.toSymbol+" / "+n.fromSymbol,disabled:l}),m.a.createElement(M.default,{label:o("swap-fee-amount"),text:n.limitOrderSwapFee,suffix:n.fromSymbol,disabled:l}),m.a.createElement(He,{state:n}))},He=function(e){var t=e.state,r=Object(u.useContext)(_.EthersContext),a=r.address,o=r.chainId,l=Object(u.useState)({}),c=n()(l,2),s=c[0],f=c[1],b=Object(u.useState)(),O=n()(b,2),y=O[0],T=O[1];E()((function(){return f({})}),[t.fromSymbol,t.toSymbol,t.fromAmount]),Object(z.default)((function(){var e,r,n;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!t.fromToken||Object(U.isEmptyValue)(t.fromAmount)){o.next=7;break}return e=Object(U.parseBalance)(t.fromAmount,t.fromToken.decimals),r=Object(U.getContract)("ERC20",t.fromToken.address,_.TOMOCHAIN_MAINET_PROVIDER),o.next=5,i.a.awrap(r.allowance(a,L.SETTLEMENT));case 5:n=o.sent,T(p.ethers.BigNumber.from(n).gte(e));case 7:case"end":return o.stop()}}),null,null,null,Promise)}),500,[t.fromToken,t.fromAmount]);var C="market"===t.orderType||""===t.toSymbol||!t.fromToken||!t.toToken||Object(U.isEmptyValue)(t.fromAmount)||!t.trade||Object(U.isEmptyValue)(t.limitOrderPrice);return m.a.createElement(d.default,{style:{marginTop:B.Spacing.normal,borderRadius:15}},C?m.a.createElement(Ve,{state:t,onError:f,disabled:!0}):Object(U.parseBalance)(t.fromAmount,t.fromToken.decimals).gt(t.fromToken.balance)?m.a.createElement(w.default,{symbol:t.fromSymbol}):N.default.parse(t.limitOrderPrice).gt(N.default.parse(t.trade.executionPrice.toFixed(t.toToken.decimals)))?t.unsupported?m.a.createElement(D.default,{state:t}):t.loading||!t.trade?m.a.createElement(V.default,null):m.a.createElement(m.a.Fragment,null,88===o?m.a.createElement(k.default,{token:t.fromToken,spender:L.SETTLEMENT,onSuccess:function(){return T(!0)},onError:f,hidden:y}):y?m.a.createElement(d.default,null):m.a.createElement(S.default,null),m.a.createElement(Ve,{state:t,onError:f,disabled:!y})):m.a.createElement(ve,null),s.message&&4001!==s.code&&m.a.createElement(v.default,{error:s}))},ve=function(){var e=Object(te.default)();return m.a.createElement(j.default,{title:e("set-price-greater-than-market"),disabled:!0,style:{borderRadius:15}})},Ve=function(e){var t=e.state,r=e.onError,a=e.disabled,n=Object(u.useContext)(_.EthersContext).chainId,o=Object(te.default)(),l=Object(W.default)("/my-orders","LimitOrders"),c=Object(u.useCallback)((function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return r({}),e.prev=1,e.next=4,i.a.awrap(t.onCreateOrder());case 4:l(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r(e.t0);case 10:case"end":return e.stop()}}),null,null,[[1,7]],Promise)}),[t.onCreateOrder,l,r]);return a||88===n?m.a.createElement(j.default,{title:o("place-order"),disabled:a,loading:t.creatingOrder,onPress:c,style:{borderRadius:15}}):m.a.createElement(S.default,{chainId:88})};t.default=function(){var e=Object(te.default)();return m.a.createElement(re.default,null,m.a.createElement(F.SwapSubMenu,null),m.a.createElement(g.default,null,m.a.createElement(T.default,null),m.a.createElement(A.default,{style:{marginBottom:40,textAlign:"center"},light:!0},e("new-order-desc")),m.a.createElement(H.default,null,m.a.createElement(ue,null))))}}}]);
//# sourceMappingURL=16.ffd96e71.chunk.js.map